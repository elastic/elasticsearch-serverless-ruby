---
http_interactions:
- request:
    method: get
    uri: https://my-deployment.elastic.co/
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Authorization:
      - ApiKey my_api_key
      x-elastic-client-meta:
      - es=8.8.0,rb=3.2.2,t=8.2.2,fd=2.7.10,nh=0.3.2
      User-Agent:
      - 'elastic-transport-ruby/8.2.2 (RUBY_VERSION: 3.2.2; linux x86_64; Faraday
        v2.7.10)'
      Content-Type:
      - application/json
  response:
    status:
      code: 200
      message: OK
    headers:
      content-length:
      - '508'
      content-type:
      - application/json
      elastic-api-version:
      - '2023-10-31'
      x-cloud-request-id:
      - OsOABKa0QbmGLsBq7rD9uQ
      x-elastic-product:
      - Elasticsearch
      x-found-handling-cluster:
      - f58ec1d678504dbe8384aa5bcf132797.es
      x-found-handling-instance:
      - es-es-search-6f4cfbc7c5-hqnjf
      date:
      - Wed, 06 Sep 2023 06:30:09 GMT
    body:
      encoding: UTF-8
      string: |
        {
          "name" : "serverless",
          "cluster_name" : "f58ec1d678504dbe8384aa5bcf132797",
          "cluster_uuid" : "yHGFvd82SwOgzSScG1qvxA",
          "version" : {
            "number" : "8.11.0",
            "build_flavor" : "serverless",
            "build_type" : "docker",
            "build_hash" : "00000000",
            "build_date" : "2023-10-31",
            "build_snapshot" : false,
            "lucene_version" : "9.7.0",
            "minimum_wire_compatibility_version" : "8.11.0",
            "minimum_index_compatibility_version" : "8.11.0"
          },
          "tagline" : "You Know, for Search"
        }
  recorded_at: Wed, 06 Sep 2023 06:30:09 GMT
- request:
    method: post
    uri: https://my-deployment.elastic.co/_bulk
    body:
      encoding: UTF-8
      string: |
        {"index":{"_index":"books"}}
        {"name":"Leviathan Wakes","author":"James S.A. Corey","release_date":"2011-06-02","page_count":561}
        {"index":{"_index":"books"}}
        {"name":"Hyperion","author":"Dan Simmons","release_date":"1989-05-26","page_count":482}
        {"index":{"_index":"books"}}
        {"name":"Dune","author":"Frank Herbert","release_date":"1965-06-01","page_count":604}
        {"index":{"_index":"books"}}
        {"name":"Dune Messiah","author":"Frank Herbert","release_date":"1969-10-15","page_count":331}
        {"index":{"_index":"books"}}
        {"name":"Children of Dune","author":"Frank Herbert","release_date":"1976-04-21","page_count":408}
        {"index":{"_index":"books"}}
        {"name":"God Emperor of Dune","author":"Frank Herbert","release_date":"1981-05-28","page_count":454}
        {"index":{"_index":"books"}}
        {"name":"Consider Phlebas","author":"Iain M. Banks","release_date":"1987-04-23","page_count":471}
        {"index":{"_index":"books"}}
        {"name":"Pandora's Star","author":"Peter F. Hamilton","release_date":"2004-03-02","page_count":768}
        {"index":{"_index":"books"}}
        {"name":"Revelation Space","author":"Alastair Reynolds","release_date":"2000-03-15","page_count":585}
        {"index":{"_index":"books"}}
        {"name":"A Fire Upon the Deep","author":"Vernor Vinge","release_date":"1992-06-01","page_count":613}
        {"index":{"_index":"books"}}
        {"name":"Ender's Game","author":"Orson Scott Card","release_date":"1985-06-01","page_count":324}
        {"index":{"_index":"books"}}
        {"name":"1984","author":"George Orwell","release_date":"1985-06-01","page_count":328}
        {"index":{"_index":"books"}}
        {"name":"Fahrenheit 451","author":"Ray Bradbury","release_date":"1953-10-15","page_count":227}
        {"index":{"_index":"books"}}
        {"name":"Brave New World","author":"Aldous Huxley","release_date":"1932-06-01","page_count":268}
        {"index":{"_index":"books"}}
        {"name":"Foundation","author":"Isaac Asimov","release_date":"1951-06-01","page_count":224}
        {"index":{"_index":"books"}}
        {"name":"The Giver","author":"Lois Lowry","release_date":"1993-04-26","page_count":208}
        {"index":{"_index":"books"}}
        {"name":"Slaughterhouse-Five","author":"Kurt Vonnegut","release_date":"1969-06-01","page_count":275}
        {"index":{"_index":"books"}}
        {"name":"The Hitchhiker's Guide to the Galaxy","author":"Douglas Adams","release_date":"1979-10-12","page_count":180}
        {"index":{"_index":"books"}}
        {"name":"Snow Crash","author":"Neal Stephenson","release_date":"1992-06-01","page_count":470}
        {"index":{"_index":"books"}}
        {"name":"Neuromancer","author":"William Gibson","release_date":"1984-07-01","page_count":271}
        {"index":{"_index":"books"}}
        {"name":"The Handmaid's Tale","author":"Margaret Atwood","release_date":"1985-06-01","page_count":311}
        {"index":{"_index":"books"}}
        {"name":"Starship Troopers","author":"Robert A. Heinlein","release_date":"1959-12-01","page_count":335}
        {"index":{"_index":"books"}}
        {"name":"The Left Hand of Darkness","author":"Ursula K. Le Guin","release_date":"1969-06-01","page_count":304}
        {"index":{"_index":"books"}}
        {"name":"The Moon is a Harsh Mistress","author":"Robert A. Heinlein","release_date":"1966-04-01","page_count":288}
    headers:
      Authorization:
      - ApiKey my_api_key
      x-elastic-client-meta:
      - es=8.8.0,rb=3.2.2,t=8.2.2,fd=2.7.10,nh=0.3.2
      User-Agent:
      - 'elastic-transport-ruby/8.2.2 (RUBY_VERSION: 3.2.2; linux x86_64; Faraday
        v2.7.10)'
      Content-Type:
      - application/x-ndjson
  response:
    status:
      code: 200
      message: OK
    headers:
      content-length:
      - '4405'
      content-type:
      - application/json
      elastic-api-version:
      - '2023-10-31'
      x-cloud-request-id:
      - ql71YDJgQNaSMMsY7NYNLg
      x-elastic-product:
      - Elasticsearch
      x-found-handling-cluster:
      - f58ec1d678504dbe8384aa5bcf132797.es
      x-found-handling-instance:
      - es-es-index-89dc5b7c-rd49w
      date:
      - Wed, 06 Sep 2023 06:30:10 GMT
    body:
      encoding: UTF-8
      string: '{"errors":false,"took":237,"items":[{"index":{"_index":"books","_id":"f7ovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":10,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"gLovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":11,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"gbovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":12,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"grovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":13,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"g7ovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":14,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"hLovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":15,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"hbovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":16,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"hrovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":17,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"h7ovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":18,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"iLovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":19,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"ibovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":20,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"irovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":21,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"i7ovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":22,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"jLovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":23,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"jbovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":24,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"jrovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":25,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"j7ovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":26,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"kLovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":27,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"kbovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":28,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"krovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":29,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"k7ovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":30,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"lLovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":31,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"lbovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":32,"_primary_term":1,"status":201}},{"index":{"_index":"books","_id":"lrovaYoBUqUndw8VHT2u","_version":1,"result":"created","_shards":{"total":1,"successful":1,"failed":0},"_seq_no":33,"_primary_term":1,"status":201}}]}'
  recorded_at: Wed, 06 Sep 2023 06:30:10 GMT
- request:
    method: post
    uri: https://my-deployment.elastic.co/books/_search?q=dune
    body:
      encoding: UTF-8
      string: '{"fields":[{"field":"name"}]}'
    headers:
      Authorization:
      - ApiKey my_api_key
      x-elastic-client-meta:
      - es=8.8.0,rb=3.2.2,t=8.2.2,fd=2.7.10,nh=0.3.2
      User-Agent:
      - 'elastic-transport-ruby/8.2.2 (RUBY_VERSION: 3.2.2; linux x86_64; Faraday
        v2.7.10)'
      Content-Type:
      - application/json
  response:
    status:
      code: 200
      message: OK
    headers:
      content-type:
      - application/json
      elastic-api-version:
      - '2023-10-31'
      x-cloud-request-id:
      - iEwn49IaR0my0ho07AytBQ
      x-elastic-product:
      - Elasticsearch
      x-found-handling-cluster:
      - f58ec1d678504dbe8384aa5bcf132797.es
      x-found-handling-instance:
      - es-es-search-6f4cfbc7c5-tj4rf
      date:
      - Wed, 06 Sep 2023 06:30:24 GMT
      content-length:
      - '994'
    body:
      encoding: UTF-8
      string: '{"took":30,"timed_out":false,"_shards":{"total":1,"successful":1,"skipped":0,"failed":0},"hits":{"total":{"value":4,"relation":"eq"},"max_score":2.5851798,"hits":[{"_index":"books","_id":"gbovaYoBUqUndw8VHT2u","_score":2.5851798,"_source":{"name":"Dune","author":"Frank
        Herbert","release_date":"1965-06-01","page_count":604},"fields":{"name":["Dune"]}},{"_index":"books","_id":"grovaYoBUqUndw8VHT2u","_score":2.1637359,"_source":{"name":"Dune
        Messiah","author":"Frank Herbert","release_date":"1969-10-15","page_count":331},"fields":{"name":["Dune
        Messiah"]}},{"_index":"books","_id":"g7ovaYoBUqUndw8VHT2u","_score":1.860441,"_source":{"name":"Children
        of Dune","author":"Frank Herbert","release_date":"1976-04-21","page_count":408},"fields":{"name":["Children
        of Dune"]}},{"_index":"books","_id":"hLovaYoBUqUndw8VHT2u","_score":1.6317198,"_source":{"name":"God
        Emperor of Dune","author":"Frank Herbert","release_date":"1981-05-28","page_count":454},"fields":{"name":["God
        Emperor of Dune"]}}]}}'
  recorded_at: Wed, 06 Sep 2023 06:30:24 GMT
- request:
    method: post
    uri: https://my-deployment.elastic.co/books/_search
    body:
      encoding: UTF-8
      string: '{"size":15}'
    headers:
      Authorization:
      - ApiKey my_api_key
      x-elastic-client-meta:
      - es=8.8.0,rb=3.2.2,t=8.2.2,fd=2.7.10,nh=0.3.2
      User-Agent:
      - 'elastic-transport-ruby/8.2.2 (RUBY_VERSION: 3.2.2; linux x86_64; Faraday
        v2.7.10)'
      Content-Type:
      - application/json
  response:
    status:
      code: 200
      message: OK
    headers:
      content-type:
      - application/json
      elastic-api-version:
      - '2023-10-31'
      x-cloud-request-id:
      - w38G9PBhRWqRoHWqnNUJew
      x-elastic-product:
      - Elasticsearch
      x-found-handling-cluster:
      - f58ec1d678504dbe8384aa5bcf132797.es
      x-found-handling-instance:
      - es-es-search-6f4cfbc7c5-hqnjf
      date:
      - Wed, 06 Sep 2023 06:30:58 GMT
      transfer-encoding:
      - chunked
    body:
      encoding: UTF-8
      string: '{"took":2,"timed_out":false,"_shards":{"total":1,"successful":1,"skipped":0,"failed":0},"hits":{"total":{"value":29,"relation":"eq"},"max_score":1.0,"hits":[{"_index":"books","_id":"R4IqaYoBx5W3OXMSIeMx","_score":1.0,"_source":{"name":"The
        Hitchhiker''s Guide to the Galaxy","author":"Douglas Adams","release_date":"1979-10-12","page_count":180}},{"_index":"books","_id":"e7oqaYoBUqUndw8V0z2v","_score":1.0,"_source":{"name":"The
        Hitchhiker''s Guide to the Galaxy","author":"Douglas Adams","release_date":"1979-10-12","page_count":180}},{"_index":"books","_id":"SIIraYoBx5W3OXMSLOOo","_score":1.0,"_source":{"name":"The
        Hitchhiker''s Guide to the Galaxy","author":"Douglas Adams","release_date":"1979-10-12","page_count":180}},{"_index":"books","_id":"fLoraYoBUqUndw8VeD0l","_score":1.0,"_source":{"name":"Foundation","author":"Isaac
        Asimov","release_date":"1951-06-01","page_count":225}},{"_index":"books","_id":"44","_score":1.0,"_source":{"name":"Starship
        Troopers","author":"Robert A. Heinlein","release_date":"1959-12-01","page_count":335}},{"_index":"books","_id":"f7ovaYoBUqUndw8VHT2u","_score":1.0,"_source":{"name":"Leviathan
        Wakes","author":"James S.A. Corey","release_date":"2011-06-02","page_count":561}},{"_index":"books","_id":"gLovaYoBUqUndw8VHT2u","_score":1.0,"_source":{"name":"Hyperion","author":"Dan
        Simmons","release_date":"1989-05-26","page_count":482}},{"_index":"books","_id":"gbovaYoBUqUndw8VHT2u","_score":1.0,"_source":{"name":"Dune","author":"Frank
        Herbert","release_date":"1965-06-01","page_count":604}},{"_index":"books","_id":"grovaYoBUqUndw8VHT2u","_score":1.0,"_source":{"name":"Dune
        Messiah","author":"Frank Herbert","release_date":"1969-10-15","page_count":331}},{"_index":"books","_id":"g7ovaYoBUqUndw8VHT2u","_score":1.0,"_source":{"name":"Children
        of Dune","author":"Frank Herbert","release_date":"1976-04-21","page_count":408}},{"_index":"books","_id":"hLovaYoBUqUndw8VHT2u","_score":1.0,"_source":{"name":"God
        Emperor of Dune","author":"Frank Herbert","release_date":"1981-05-28","page_count":454}},{"_index":"books","_id":"hbovaYoBUqUndw8VHT2u","_score":1.0,"_source":{"name":"Consider
        Phlebas","author":"Iain M. Banks","release_date":"1987-04-23","page_count":471}},{"_index":"books","_id":"hrovaYoBUqUndw8VHT2u","_score":1.0,"_source":{"name":"Pandora''s
        Star","author":"Peter F. Hamilton","release_date":"2004-03-02","page_count":768}},{"_index":"books","_id":"h7ovaYoBUqUndw8VHT2u","_score":1.0,"_source":{"name":"Revelation
        Space","author":"Alastair Reynolds","release_date":"2000-03-15","page_count":585}},{"_index":"books","_id":"iLovaYoBUqUndw8VHT2u","_score":1.0,"_source":{"name":"A
        Fire Upon the Deep","author":"Vernor Vinge","release_date":"1992-06-01","page_count":613}}]}}'
  recorded_at: Wed, 06 Sep 2023 06:30:58 GMT
recorded_with: VCR 6.2.0
